-- LocalScript (Xeno, Synapse vb.)
local player = game.Players.LocalPlayer
local runService = game:GetService("RunService")

-- Vuruş remote'unu bul (oyuna göre değişebilir)
local remote = game:GetService("ReplicatedStorage"):FindFirstChild("Parry") 
        or game:GetService("ReplicatedStorage"):FindFirstChild("Swing")
        or game:GetService("ReplicatedStorage"):FindFirstChild("Hit")
        or game:GetService("ReplicatedStorage"):FindFirstChild("Block")

if not remote then
    warn("Vuruş remote'u bulunamadı! Lütfen oyuna göre düzenle.")
end

-- Vuruş fonksiyonu (topa vur)
local function vur(top)
    if remote then
        remote:FireServer(top)  -- top objesini gönder
        print("Vuruldu!")
    else
        -- remote yoksa belki F tuşuna basmayı dene? Ama simulate etmek zor.
    end
end

-- Her frame'de kontrol et (çok hızlı)
runService.RenderStepped:Connect(function()
    local character = player.Character
    if not character then return end
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end

    -- Oyundaki tüm topları tara (hızlı olması için GetDescendants yerine belki bir havuz oluşturulabilir)
    for _, top in ipairs(workspace:GetDescendants()) do
        if top:IsA("Part") and (top.Name:find("Ball") or top.Name:find("Projectile")) then
            -- Topun rengi kırmızı mı kontrol et (isteğe bağlı)
            -- Renk kontrolü: top.BrickColor == BrickColor.new("Really red") gibi

            -- Topun hızı
            local hiz = top.Velocity
            if hiz.Magnitude < 1 then continue end  -- duran topu alma

            -- Topun konumu ile oyuncu arasındaki vektör
            local toPlayer = rootPart.Position - top.Position
            local mesafe = toPlayer.Magnitude

            -- Topun yönü (birim vektör)
            local yon = hiz.unit

            -- Topun oyuncuya doğru gelip gelmediğini kontrol et (nokta çarpım)
            local dogruMu = toPlayer.unit:Dot(yon) > 0.7  -- 0.7'den büyükse yaklaşık aynı yön

            -- Belirli bir mesafeye yaklaştıysa ve üstüne geliyorsa vur
            if dogruMu and mesafe < 20 then  -- 20 birim mesafe (ayarlayabilirsin)
                vur(top)
                -- Aynı topa birden çok kez vurmamak için kısa bir bekleme eklenebilir veya topu işaretle
                break  -- sadece bir topa vur, hepsine değil
            end
        end
    end
end)
