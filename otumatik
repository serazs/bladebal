-- BLADE BALL HIZLI DESTEK MENÜLÜ SCRIPT
-- (Ana scriptten sonra çalıştır veya tek başına kullan)

local player = game.Players.LocalPlayer
local coreGui = game:GetService("CoreGui")
local runService = game:GetService("RunService")
local virtualInput = game:GetService("VirtualInputManager")
local userInputService = game:GetService("UserInputService")

-- Değişkenler
local enabled = true
local tetiklemeOrani = 0.85
local lastParryTime = 0
local menuAcik = true

-- Top klasörünü bul
local function findBallsFolder()
    local possibleNames = {"Balls", "Projectiles", "Throwables", "BallsFolder"}
    for _, name in ipairs(possibleNames) do
        local folder = workspace:FindFirstChild(name)
        if folder then return folder end
    end
    return nil
end

-- Top hızını al
local function getBallSpeed(ball)
    if ball.Velocity and ball.Velocity.Magnitude > 0.1 then
        return ball.Velocity.Magnitude
    end
    if ball.AssemblyLinearVelocity and ball.AssemblyLinearVelocity.Magnitude > 0.1 then
        return ball.AssemblyLinearVelocity.Magnitude
    end
    local zoomies = ball:FindFirstChild("zoomies")
    if zoomies then
        if zoomies:IsA("BodyVelocity") then
            return zoomies.Velocity.Magnitude
        elseif zoomies:IsA("Vector3Value") then
            return zoomies.Value.Magnitude
        end
    end
    for _, child in ipairs(ball:GetChildren()) do
        if child:IsA("BodyVelocity") then
            return child.Velocity.Magnitude
        end
    end
    return 0
end

-- DESTEK DÖNGÜSÜ
runService.PreSimulation:Connect(function()
    if not enabled then return end
    
    local now = tick()
    if now - lastParryTime < 0.15 then return end -- cooldown
    
    local character = player.Character
    if not character then return end
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local ballsFolder = findBallsFolder()
    if not ballsFolder then return end
    
    for _, ball in ipairs(ballsFolder:GetChildren()) do
        if not ball:IsA("BasePart") then continue end
        
        local speed = getBallSpeed(ball)
        if speed < 1 then continue end
        
        local target = ball:GetAttribute("target")
        if target and target ~= player.Name then continue end
        
        local distance = (hrp.Position - ball.Position).Magnitude
        if distance / speed <= tetiklemeOrani then
            virtualInput:SendMouseButtonEvent(0, 0, 0, true, game, 0)
            task.wait(0.03)
            virtualInput:SendMouseButtonEvent(0, 0, 0, false, game, 0)
            lastParryTime = now
            break
        end
    end
end)

-- MENÜ OLUŞTURMA
local gui = Instance.new("ScreenGui")
gui.Name = "BladeBallDestek"
gui.ResetOnSpawn = false
gui.Parent = coreGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 150)
frame.Position = UDim2.new(0.8, 0, 0.3, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.2
frame.Active = true
frame.Draggable = true
frame.Parent = gui

local uicorner = Instance.new("UICorner")
uicorner.CornerRadius = UDim.new(0, 10)
uicorner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "⚡ Hızlı Destek"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame

local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0.8, 0, 0, 35)
toggleBtn.Position = UDim2.new(0.1, 0, 0.25, 0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
toggleBtn.Text = "AÇIK"
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 16
toggleBtn.Parent = frame

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 8)
toggleCorner.Parent = toggleBtn

local sliderLabel = Instance.new("TextLabel")
sliderLabel.Size = UDim2.new(1, 0, 0, 20)
sliderLabel.Position = UDim2.new(0, 0, 0.5, 0)
sliderLabel.BackgroundTransparency = 1
sliderLabel.Text = "Hassasiyet: 0.85"
sliderLabel.TextColor3 = Color3.new(1, 1, 1)
sliderLabel.Font = Enum.Font.Gotham
sliderLabel.TextSize = 12
sliderLabel.Parent = frame

local slider = Instance.new("TextBox")
slider.Size = UDim2.new(0.6, 0, 0, 25)
slider.Position = UDim2.new(0.2, 0, 0.65, 0)
slider.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
slider.Text = "0.85"
slider.TextColor3 = Color3.new(1, 1, 1)
slider.Font = Enum.Font.Gotham
slider.TextSize = 14
slider.Parent = frame

local sliderCorner = Instance.new("UICorner")
sliderCorner.CornerRadius = UDim.new(0, 5)
sliderCorner.Parent = slider

-- Buton işlevi
toggleBtn.MouseButton1Click:Connect(function()
    enabled = not enabled
    if enabled then
        toggleBtn.Text = "AÇIK"
        toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    else
        toggleBtn.Text = "KAPALI"
        toggleBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    end
end)

-- Slider işlevi
slider.FocusLost:Connect(function()
    local val = tonumber(slider.Text)
    if val and val >= 0.5 and val <= 1.2 then
        tetiklemeOrani = val
        sliderLabel.Text = "Hassasiyet: " .. string.format("%.2f", tetiklemeOrani)
    else
        slider.Text = string.format("%.2f", tetiklemeOrani)
    end
end)

-- Menü göster/gizle (F4 tuşu ile)
userInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.F4 then
        menuAcik = not menuAcik
        frame.Visible = menuAcik
    end
end)

print("✅ Destek menüsü aktif! F4 ile aç/kapa.")
