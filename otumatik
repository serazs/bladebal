-- Ana scripti yükle
loadstring(game:HttpGet("https://raw.githubusercontent.com/Akash1al/Blade-Ball-Updated-Script/refs/heads/main/Blade-Ball-Script"))()

-- Gecikme sorununu çözmek için ek optimizasyonlar
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local VirtualInputManager = game:GetService("VirtualInputManager")

local player = Players.LocalPlayer
local parryLock = false
local lastParryTime = 0
local parryCooldown = 0.15  -- Aynı topa çok hızlı vurmayı engelle

-- Daha hızlı top bulma fonksiyonu (cache'leme)
local function getBall()
    -- workspace.Balls klasörünü kontrol et
    local ballsFolder = workspace:FindFirstChild("Balls")
    if ballsFolder then
        for _, ball in ipairs(ballsFolder:GetChildren()) do
            if ball:GetAttribute("realBall") then
                return ball
            end
        end
    end
    return nil
end

-- Ana döngü (RenderStepped daha hızlı tepki verir)
RunService.RenderStepped:Connect(function()
    local character = player.Character
    if not character then return end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local ball = getBall()
    if not ball then return end
    
    -- Topun hedefi oyuncu mu?
    if ball:GetAttribute("target") ~= player.Name then return end
    
    -- Topun hızı ve konumu
    local velocity = ball:FindFirstChild("zoomies") and ball.zoomies:FindFirstChild("VectorVelocity")
    if not velocity then return end
    
    local speed = velocity.Value.Magnitude
    if speed < 1 then return end  -- Çok yavaş topları atla
    
    local distance = (hrp.Position - ball.Position).Magnitude
    
    -- Dinamik zamanlama: top hızlandıkça daha erken vur
    local timingFactor = 0.45  -- Normalde 0.55 idi, daha erken vurmak için düşürdük
    if speed > 100 then
        timingFactor = 0.4  -- Çok hızlı toplarda daha da erken vur
    end
    
    local timeToImpact = distance / speed
    
    -- Vuruş zamanı geldi mi?
    if timeToImpact <= timingFactor and not parryLock then
        -- Fare tıklaması simüle et
        VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
        parryLock = true
        lastParryTime = tick()
        
        -- Kısa süreliğine kilidi aç
        task.delay(parryCooldown, function()
            parryLock = false
        end)
    end
end)

-- Hata ayıklama için konsola bilgi yazdır (istersen kaldırabilirsin)
print("Blade Ball Auto Parry - Optimize Edilmiş Sürüm Aktif")
