-- HIZLI DESTEK SCRİPTİ (Ana scriptle birlikte çalıştır)
-- Bu script, verdiğin ana scripte ek olarak çalışır, onun gecikmelerini tolere eder.

local player = game.Players.LocalPlayer
local runService = game:GetService("RunService")
local virtualInput = game:GetService("VirtualInputManager")

-- Algılama eşiği (ana scriptte 0.55, biz daha erken vurmak için 0.8 kullanalım)
local TETIKLEME_ORANI = 0.8  -- (mesafe / hız) oranı, düşürürsen daha erken vurur

-- Her frame'de kontrol et (çok hızlı)
runService.PreSimulation:Connect(function()
    -- Karakter ve root part kontrolü
    local character = player.Character
    if not character then return end
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    -- Topları workspace.Balls klasöründe ara (ana scriptin kullandığı yer)
    local ballsFolder = workspace:FindFirstChild("Balls")
    if not ballsFolder then return end

    for _, ball in ipairs(ballsFolder:GetChildren()) do
        -- Top geçerli mi?
        if ball:IsA("Part") and ball:GetAttribute("realBall") then
            local velocity = ball:FindFirstChild("zoomies") -- hız vektörü
            if not velocity then continue end
            
            local speed = velocity.VectorVelocity.Magnitude
            if speed < 1 then continue end -- çok yavaşsa atla

            local distance = (hrp.Position - ball.Position).Magnitude
            local target = ball:GetAttribute("target")

            -- Top bize mi geliyor? (target bize ait veya boşsa da dene)
            if target == player.Name then
                -- Mesafe/Hız oranı eşiğin altına düştüyse VUR!
                if distance / speed <= TETIKLEME_ORANI then
                    -- Fare tıklaması gönder (ana scriptteki yöntem)
                    virtualInput:SendMouseButtonEvent(0, 0, 0, true, game, 0)
                    -- Çakışmayı önlemek için kısa bekleme (isteğe bağlı)
                    task.wait(0.05)
                    virtualInput:SendMouseButtonEvent(0, 0, 0, false, game, 0)
                    
                    -- Aynı anda birden çok topa vurmamak için döngüden çık
                    break
                end
            end
        end
    end
end)

print("Hızlı destek scripti aktif! Tetikleme oranı:", TETIKLEME_ORANI)
